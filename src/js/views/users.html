<div class="oj-hybrid-padding">

  <div class="oj-flex oj-sm-align-items-center">
    <div class="oj-flex-item"> 
      <h1>All Users</h1>
    </div>
    <!-- <div class="oj-flex-item">
      <div class="oj-flex oj-sm-justify-content-flex-end">
        <oj-button on-oj-action=[[createUserListener]]>+ Create User</oj-button>
      </div>
    </div> -->
  </div>

  <oj-input-text id="filter" class="oj-form-control-max-width-md" label-hint="Search" label-edge="inside"
    placeholder="Type to filter" on-raw-value-changed="[[handleValueChanged]]" value="{{filter}}" clear-icon="always">
  </oj-input-text>
  <div data-bind="if: apiLoaded" class="oj-flex">

    <oj-table id='table' aria-label='Departments Table'
      data='[[userDatasource]]'
      selection-mode='{"row": "single"}'
      style='width: 100%; height: 800px;'
      on-selected-changed='{{userSelectionListener}}'
      columns='[[columnArray]]'>
    </oj-table>
  </div>
  <oj-dialog style="display:none; width: 40%;" id="modalDialog1" dialog-title="[[dialogTitle]]">
    <div slot="body">
      <oj-form-layout max-columns="2" direction="row">
        <oj-input-text label-hint="id" value=[[selectedUserId]] readonly>
        </oj-input-text>
        <oj-input-text label-hint="Last Updated Skills" value="[[selectedUserUpdatedDate]]" readonly>
        </oj-input-text>
        <oj-input-text label-hint="First Name" value="{{selectedUserFirstName}}" readonly>
        </oj-input-text>
        <oj-input-text label-hint="Surname" value="{{selectedUserSurname}}" readonly>
        </oj-input-text>
      </oj-form-layout>
      <fieldset style="border:1px #b0b0b0 solid;padding:10px">
        <legend style="border:1px #b0b0b0 solid;margin-left: 1em;padding:0.2em 0.8em">Skills</legend>
        <oj-list-view id="listview" style="min-width:400px;width:100%; max-height: 200px;"
        data="[[userSkillsDataProvider]]">
          <template slot="itemTemplate" data-oj-as="item">
            <div class="oj-flex oj-sm-align-items-center">
              <div class="oj-flex-item" style="padding-right: 10px;">
                <span>
                  <oj-bind-text value="[[item.data.name]]"></oj-bind-text>
                </span>
              </div>
                <span>
                  <oj-bind-text value="[[item.data.proficiency]]"></oj-bind-text>
                </span>
            </div>
          </template>
        </oj-list-view>
      </fieldset>
    </div>
    <!-- <div slot="footer">
      <oj-button id="okButton" on-oj-action="[[close]]">Edit
      </oj-button>
      <oj-button id="okButton" on-oj-action="[[close]]">Save
      </oj-button>
    </div> -->
  </oj-dialog>
  <oj-dialog style="display:none; width: 30%;" id="createUserDialog" dialog-title="New User">
    <div slot="body">
      <oj-form-layout max-columns="2" direction="row">
        <oj-input-text label-hint="First Name" value="{{selectedUserFirstName}}">
        </oj-input-text>
        <oj-input-text label-hint="Surname" value="{{selectedUserSurname}}">
        </oj-input-text>
      </oj-form-layout>
    </div>
    <div slot="footer">
      <oj-button id="saveButton" on-oj-action="[[saveUserListener]]">Save
      </oj-button>
    </div>
  </oj-dialog>

</div>
